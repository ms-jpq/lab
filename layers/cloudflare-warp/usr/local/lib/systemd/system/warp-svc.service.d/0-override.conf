[Unit]

Wants          = 0-warp-mon.service
Before         = 0-warp-mon.service
PartOf         = 0-warp-mon.service

[Service]
ProtectSystem  = strict
ProtectHome    = yes
PrivateTmp     = yes

StateDirectory =
LogsDirectory  =

LogLevelMax    = notice
MemoryHigh     = 300M
MemoryMax      = 400M

BindPaths      = %C/local/warp:%S/cloudflare-warp
ExecStartPost  = /usr/local/libexec/retry.sh 0.1 stat -- %t/cloudflare-warp/warp_service
ExecStartPost  = -warp-cli --accept-tos registration delete
ExecStartPost  = warp-cli --accept-tos registration new
ExecStartPost  = warp-cli --accept-tos mode proxy
ExecStartPost  = warp-cli --accept-tos connect
