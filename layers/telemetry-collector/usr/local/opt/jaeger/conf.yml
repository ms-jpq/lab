# https://www.jaegertracing.io/docs/2.0/deployment/configuration
# https://github.com/jaegertracing/jaeger/blob/v2.0.0/cmd/jaeger/config.yaml
---
extensions:
  &jstorage jaeger_storage:
    backends:
      &store var_local_state:
        badger:
          ephemeral: false
          directories:
            keys: /var/lib/local/jaeger/keys
            values: /var/lib/local/jaeger/values
  &jquery jaeger_query:
    storage:
      traces: *store
    ui:
receivers:
  &recv otlp:
    protocols:
      http:
        endpoint: "[::]:4318"
processors:
  &batch batch:
exporters:
  &jexporter jaeger_storage_exporter:
    trace_storage: some_store
  &loki otlphttp:
    endpoint: localhost:3100/otlp
service:
  extensions:
    - *jstorage
    - *jquery
  pipelines:
    traces:
      receivers:
        - *recv
      processors:
        - *batch
      exporters:
        - *jexporter
    logs:
      receivers:
        - *recv
      exporters:
        - *loki
