[Unit]
Description              = Xray Server
After                    = network-online.target

[Service]
Restart                  = on-failure
DynamicUser              = yes
CapabilityBoundingSet    = CAP_NET_ADMIN CAP_NET_BIND_SERVICE
AmbientCapabilities      = CAP_NET_ADMIN CAP_NET_BIND_SERVICE
NoNewPrivileges          = yes

RestartPreventExitStatus = 23

Environment              = XRAY_LOCATION_ASSET=/opt/xray
ExecStart                = xray run -config /usr/local/opt/xray/server.json
