# https://github.com/traefik/traefik-helm-chart/blob/master/traefik/VALUES.md
---
apiVersion: helm.cattle.io/v1
kind: HelmChartConfig
metadata:
  name: traefik
  namespace: kube-system
spec:
  valuesContent: |-
    additionalArguments:
      - --serverstransport.insecureskipverify=true
    ingressRoute:
      dashboard:
        enabled: true
    ports:
      traefik:
        exposedPort: 9000
        expose:
          default: true
      web:
        exposedPort: 8008
        forwardedHeaders:
          insecure: true
        proxyProtocol:
          insecure: true
      websecure:
        expose:
          default: false
    metrics:
      otlp: &otlp-http
        enabled: true
        http:
          enabled: true
          endpoint: kube-state-metrics.kube-state-metrics.svc.cluster.local:8080
          headers:
            authorization: >-
              Basic m5_esyscmd(printf -- %s 'm5_assert([ENV_OTLP_PASSWORD])' | jq --raw-input --join-output '"otlp:\(.)" | @base64')
    tracing:
      otlp:
        <<: *otlp-http
    logs:
      access:
        enabled: true
        otlp:
          <<: *otlp-http
