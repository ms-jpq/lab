[global]
  ##################
  # IDENTIFICATION #
  ##################

  # Server name
  server string = %h

  ############
  # SECURITY #
  ############

  # ignore ad
  # server role = standalone
  # Bad usernames map to guest
  map to guest = bad user
  # Guest privilege
  guest account = ubuntu

  # Allow write
  read only = no
  # Allow guests
  guest ok = yes
  guest only = yes

  #######
  # VFS #
  #######

  # fruit ->         compatibility with fapple smb
  # streams_xattr -> supports ntfs attrs
  # recycle ->       recycle bin
  vfs objects = fruit streams_xattr recycle io_uring

  # vfs_fruit opts #
  # https://wiki.samba.org/index.php/Configure_Samba_to_Work_Better_with_Mac_OS_X
  fruit:model = Windows
  fruit:metadata = stream
  fruit:delete_empty_adfiles = yes 
  fruit:nfs_aces = no
  fruit:time machine = yes
  fruit:veto_appledouble = no
  fruit:wipe_intentionally_left_blank_rfork = yes 
  # vfs_fruit opts #

  recycle:repository = .Trash-%U
  recycle:keeptree = yes
  recycle:versions = yes

  ########
  # USER #
  ########

  usershare path = /var/lib/local/samba/usershares
  usershare prefix allow list = /media
  usershare max shares = 255
  usershare allow guests = yes

  ###############
  # PERFORMANCE #
  ###############

  use sendfile = yes

  # TODO: Remove this when segfault is fixed
  server multi channel support = no

[printers]
  printable = yes
