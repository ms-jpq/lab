---
services:
  speedtest:
    image: ghcr.io/librespeed/speedtest:latest
    labels:
      kompose.service.expose: speedtest.${DOMAIN}
      traefik.ingress.kubernetes.io/router.middlewares: ${COMPOSE_PROJECT_NAME}-sablier@kubernetescrd
    healthcheck:
      test:
        - CMD
        - curl
        - --fail
        - --location
        - --no-progress-meter
        - --output
        - /dev/null
        - --max-time
        - "1"
        - --
        - localhost:8080
    ports:
      - 8080
    volumes:
      - data:/database

volumes:
  data:
