---
extensions:
  &auth basicauth:
    client_auth:
      username: loki
      password: m5_assert([ENV_OTLP_PASSWORD])
receivers:
  # https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/awscloudwatchreceiver/README.md
  &input awscloudwatch:
    region: m5_assert([ENV_AWS_REGION])
processors:
  &meta transform:
    log_statements: []
exporters:
  &output otlphttp:
    endpoint: m5_assert([ENV_OTLP_ENDPOINT])/otlp
    auth:
      authenticator: *auth
service:
  extensions:
    - *auth
  telemetry:
    logs:
      level: warn
  pipelines:
    logs:
      receivers:
        - *input
      processors:
        - *meta
      exporters:
        - *output
