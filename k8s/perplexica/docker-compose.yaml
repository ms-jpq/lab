---
services:
  perplexica-api:
    image: docker.io/itzcrazykns1337/perplexica-backend:main
    labels:
      kompose.service.expose: api.perp.${DOMAIN}
    environment:
      SEARXNG_API_URL: http://searxng.kompsed-searx.svc.cluster.local:8080
    ports:
      - 3001
    volumes:
      - perplexica:/home/perplexica/data
      - ./config.toml:/home/perplexica/config.toml

  perplexica-web:
    image: itzcrazykns1337/perplexica-frontend:main
    labels:
      kompose.service.expose: perp.${DOMAIN}
    ports:
      - 3000
